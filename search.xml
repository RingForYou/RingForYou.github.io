<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo博客安装</title>
      <link href="2021/03/15/Hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85/"/>
      <url>2021/03/15/Hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p> npm install hexo-cli -g</p><p>hexo init </p><p>如果报错就是nodeJs 版本太低</p><h3 id="生成静态页面"><a href="#生成静态页面" class="headerlink" title="生成静态页面"></a>生成静态页面</h3><p>hexo g</p><h3 id="启动本地服务"><a href="#启动本地服务" class="headerlink" title="启动本地服务"></a>启动本地服务</h3><p>hexo s</p><p>美化个人博客</p><h2 id="博客主题设置"><a href="#博客主题设置" class="headerlink" title="博客主题设置"></a>博客主题设置</h2><h3 id="克隆主题"><a href="#克隆主题" class="headerlink" title="克隆主题"></a>克隆主题</h3><ul><li>在项目根目录下的 <strong>themes</strong> 文件中，打开 <strong>Git Bash</strong> ，用命令行克隆下新的主题。我这里用的 Next 主题，需要其他主题的自己百度找。</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next.git</span><br></pre></td></tr></table></figure><p>配置主题</p><ul><li>用文本的方式打开项目根目录下的 _config.yml 配置文件，找到 <strong>theme</strong> 把原来默认的 <del><strong>landscape</strong></del> 主题名字，改成刚刚克隆的主题名字（主题名字为上图中文件夹的名字）。</li></ul><p><img src="https://tcs-devops.aliyuncs.com/storage/11236f013f4f2b39a3d3c8d03ec586dab36d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyMzM2NCwiaWF0IjoxNjE2MTE4NTY0LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM2ZjAxM2Y0ZjJiMzlhM2QzYzhkMDNlYzU4NmRhYjM2ZCJ9.VyMdBekMD4OL43QOCr595wGcUC6Ll6O6RFXi-ZnB6Ns&download=image.png"></p><p>测试主题</p><ul><li>重新回到项目根目录下，打开 <strong>Git Bath</strong> ，用命令行启动服务器。在浏览器访问 <a href="http://localhost:4000/">http://localhost:4000</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MYSQL全文检索</title>
      <link href="2021/03/15/MYSQL%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/"/>
      <url>2021/03/15/MYSQL%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2/</url>
      
        <content type="html"><![CDATA[<h3 id="1、通过-alter-table-方式-创建索引（必须有ngram，因为配置文件中配置的ngram）"><a href="#1、通过-alter-table-方式-创建索引（必须有ngram，因为配置文件中配置的ngram）" class="headerlink" title="1、通过 alter table 方式-创建索引（必须有ngram，因为配置文件中配置的ngram）"></a>1、通过 alter table 方式-创建索引（必须有ngram，因为配置文件中配置的ngram）</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE t_wenshu ADD FULLTEXT INDEX content_index (content) WITH PARSER ngram;</span><br></pre></td></tr></table></figure><h3 id="2、通过-create-index-方式-创建索引"><a href="#2、通过-create-index-方式-创建索引" class="headerlink" title="2、通过 create index 方式-创建索引"></a>2、通过 create index 方式-创建索引</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE FULLTEXT INDEX content_index ON t_wenshu (content) WITH PARSER ngram;</span><br></pre></td></tr></table></figure><p>repair table article_channel quick        修复索引</p><p>SELECT * from article_channel WHERE MATCH(desc2) AGAINST(“亚黑”)       普通检索方法</p><p>select title,url, MATCH (title,url) AGAINST (‘姐姐高中姐姐’) as score from fiction where MATCH (title,url) </p><p>AGAINST (‘姐姐高中姐姐’ IN NATURAL LANGUAGE MODE)    //带分数的查询方法</p><p>show variables like ‘ngram_token_size’        //查看分词</p><p>my.cnf     /etc/mysql/my.cnf        配置文件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">ngram_token_size=2</span><br><span class="line">innodb_ft_min_token_size = 1</span><br><span class="line">ft_min_word_len = 1</span><br></pre></td></tr></table></figure><h3 id="创建测试数据"><a href="#创建测试数据" class="headerlink" title="创建测试数据"></a>创建测试数据</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">create table test(</span><br><span class="line">id int(11) not null primary key auto_increment,</span><br><span class="line">name varchar(100) not null comment &#x27;工商名&#x27;,</span><br><span class="line">brand varchar(100) default null comment &#x27;品牌名&#x27;,</span><br><span class="line">en varchar(100) default null comment &#x27;英文名&#x27;,</span><br><span class="line">fulltext key (name,brand,en) with parser ngram</span><br><span class="line">)engine=innodb default charset=utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into test (name,brand,en) values (&#x27;芜湖美的厨卫电气制造有限公司&#x27;,&#x27;aa&#x27;,&#x27;wh&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;北京凡客尚品电子商务有限公司&#x27;,&#x27;aa&#x27;,&#x27;ef&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;凡客诚品（北京）科技有限公司&#x27;,&#x27;aa&#x27;,&#x27;dfd&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;瞬联讯通科技（北京）有限公司&#x27;,&#x27;aa&#x27;,&#x27;sdfs&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;北京畅捷通讯有限公司&#x27;,&#x27;aa&#x27;,&#x27;wsdh&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;北京畅捷通支付技术有限公司&#x27;,&#x27;aa&#x27;,&#x27;df&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;畅捷通信息技术股份有限公司&#x27;,&#x27;aa&#x27;,&#x27;whdfgh&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;北京畅捷科技有限公司&#x27;,&#x27;aa&#x27;,&#x27;dgdf&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;中国航天工业科学技术咨询有限公司&#x27;,&#x27;aa&#x27;,&#x27;whffgh&#x27;);</span><br><span class="line">insert into test (name,brand,en) values (&#x27;北京·松下彩色显象管有限公司&#x27;,&#x27;aa&#x27;,&#x27;wfghfgh&#x27;);</span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/jstarseven/p/13558612.html">Mysql 如何实现全文检索，关键词跑分 - jstarseven - 博客园 (cnblogs.com)</a></p><p>根据权重和访问次数排序</p><p>SELECT title.*,record.num ,MATCH(title,keyword) AGAINST(“皮带”) as score from title</p><pre><code>    left join record    on title.id = record.title_id    WHERE MATCH(title,keyword) AGAINST(&quot;皮带&quot;) order by score desc, record.num desc</code></pre>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL使用存储过程新增数据</title>
      <link href="2021/03/15/MySQL%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE/"/>
      <url>2021/03/15/MySQL%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">drop procedure insert_data;            删除存储过程</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line">CREATE  </span><br><span class="line">    PROCEDURE `test`.`insert_data`()          命名存储过程</span><br><span class="line">    BEGIN                            开始循环</span><br><span class="line">DECLARE i INT DEFAULT 0;        创建变量</span><br><span class="line">WHILE(i&lt;=10000) DO            循环</span><br><span class="line">BEGIN                        开始</span><br><span class="line">SELECT i;    </span><br><span class="line">SET i=i+1;</span><br><span class="line">INSERT INTO dept(deptName,salary,createDate,remark) VALUES(i,20000,NOW(),&#x27;test&#x27;);        添加数据</span><br><span class="line">END ;                结束</span><br><span class="line">END WHILE;        结束循环</span><br><span class="line">    END$$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">call insert_data();            执行存储过程</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL开启Binlog日志</title>
      <link href="2021/03/15/MySQL%E5%BC%80%E5%90%AFBinlog%E6%97%A5%E5%BF%97/"/>
      <url>2021/03/15/MySQL%E5%BC%80%E5%90%AFBinlog%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<p>查询是否开启</p><p>show VARIABLES like ‘log_%’</p><p><img src="https://tcs-devops.aliyuncs.com/storage/1122a0ce1f2578994eb2e5c04cb0766d9273?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjEzNSwiaWF0IjoxNjE2MTQxMzM1LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjJhMGNlMWYyNTc4OTk0ZWIyZTVjMDRjYjA3NjZkOTI3MyJ9.7g6TL0EbtrAOLMOZKu37nlZL84oECqGWneGMuSMV2K0&download=image.png"></p><ol><li>修改文件：vim /etc/my.cnf，在 [mysqld] 下添加</li></ol><p>log-bin=/var/lib/mysql/mysql-bin</p><p>expire_logs_days = 7 # 只保留 7 天的日志文件(永久生效,这个有个致命的缺点就是需要重启mysql)</p><p>临时生效：进入mysql，用以下命令设置全局的参数：set global expire_logs_days=30;</p><p>然后保存</p><ol start="2"><li><p>重启mysql：service mysqld restart</p></li><li><p>进入mysql控制台，输入：show variables like ‘log_%’;</p></li></ol><p>cat /etc/my.cnf | grep log-bin 查詢bin_log日志文件位置</p><p>查看目前的binlog文件</p><p>show master status;</p><p><img src="https://tcs-devops.aliyuncs.com/storage/112226b272518e37753d19b3a69fd8cb966b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjEzNSwiaWF0IjoxNjE2MTQxMzM1LCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjIyNmIyNzI1MThlMzc3NTNkMTliM2E2OWZkOGNiOTY2YiJ9.Fm3DMO7lfSEA3YT3sBPMiDgvAD4sCVWGk_JQvHcO81Q&download=image.png"></p>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql/Binlog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL文件转Word文件</title>
      <link href="2021/03/15/SQL%E6%96%87%E4%BB%B6%E8%BD%ACWord%E6%96%87%E4%BB%B6/"/>
      <url>2021/03/15/SQL%E6%96%87%E4%BB%B6%E8%BD%ACWord%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.poi.xwpf.usermodel.*;</span><br><span class="line"><span class="keyword">import</span> org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTbl;</span><br><span class="line"><span class="keyword">import</span> org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblGrid;</span><br><span class="line"><span class="keyword">import</span> org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblGridCol;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            createDoc(<span class="string">&quot;e:\\besst.docx&quot;</span>, <span class="string">&quot;e:\\online-test.sql&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getTableName</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        String result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (sql.contains(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">            result = sql.substring(<span class="number">6</span>, sql.indexOf(<span class="string">&quot;(&quot;</span>) - <span class="number">1</span>).trim();</span><br><span class="line">            result = result.substring(<span class="number">1</span>, result.length() - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (sql.contains(<span class="string">&quot;comment on table&quot;</span>)) &#123;</span><br><span class="line">                String s = sql.split(<span class="string">&quot;;&quot;</span>)[<span class="number">1</span>];</span><br><span class="line">                result += <span class="string">&quot;(&quot;</span> + s.substring(s.indexOf(<span class="string">&quot;&#x27;&quot;</span>) + <span class="number">1</span>, s.lastIndexOf(<span class="string">&quot;&#x27;&quot;</span>)) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertCells</span><span class="params">(XWPFDocument doc, String sql)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获得field属性的sql</span></span><br><span class="line">        String substring = sql.substring(sql.indexOf(<span class="string">&quot;(&quot;</span>) + <span class="number">1</span>, sql.lastIndexOf(<span class="string">&quot;)&quot;</span>));</span><br><span class="line">        String[] split = substring.split(<span class="string">&quot;,\n&quot;</span>);</span><br><span class="line">        <span class="comment">//创建表格</span></span><br><span class="line">        XWPFTable table = doc.createTable(split.length, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">//设置表格宽度</span></span><br><span class="line">        setW(table, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">//第一行数据插入</span></span><br><span class="line">        insertHeader(table);</span><br><span class="line">        <span class="comment">//获得备注的map</span></span><br><span class="line">        Map&lt;String, String&gt; map = getCommentInfo(sql);</span><br><span class="line">        <span class="comment">//表字段数据插入</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; split.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> biao = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            String[] split1 = split[i].split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            List&lt;XWPFTableCell&gt; tableCells = table.getRow(i + <span class="number">1</span>).getTableCells();</span><br><span class="line">            <span class="comment">//遍历获得字段信息</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; split1.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (split1[j].trim().length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (split1[j].trim().indexOf(<span class="string">&quot;PRIMARY&quot;</span>) == -<span class="number">1</span> &amp;&amp; split1[j].trim().indexOf(<span class="string">&quot;UNIQUE&quot;</span>) == -<span class="number">1</span> &amp;&amp; split1[j].trim().indexOf(<span class="string">&quot;KEY&quot;</span>) == -<span class="number">1</span> &amp;&amp; split1[j].trim().indexOf(<span class="string">&quot;CONSTRAINT&quot;</span>) == -<span class="number">1</span> &amp;&amp; split1[j].trim().indexOf(<span class="string">&quot;FULLTEXT&quot;</span>) == -<span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">//设置属性名</span></span><br><span class="line">                            String name = split1[j].trim().substring(<span class="number">1</span>, split1[j].trim().length() - <span class="number">1</span>);</span><br><span class="line">                            tableCells.get(<span class="number">0</span>).setText(name);</span><br><span class="line">                            <span class="comment">//备注</span></span><br><span class="line">                            String remark = map.get(name) != <span class="keyword">null</span> ? map.get(name) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">                            tableCells.get(<span class="number">4</span>).setText(remark);</span><br><span class="line">                            index = <span class="number">1</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == <span class="number">1</span>) &#123;</span><br><span class="line">                            <span class="comment">//类型</span></span><br><span class="line">                            String type = split1[j].trim();</span><br><span class="line">                            <span class="comment">//长度</span></span><br><span class="line">                            String length = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                            <span class="keyword">if</span> (type.contains(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">                                length = type.substring(type.indexOf(<span class="string">&quot;(&quot;</span>) + <span class="number">1</span>, type.indexOf(<span class="string">&quot;)&quot;</span>));</span><br><span class="line">                                type = type.substring(<span class="number">0</span>, type.indexOf(<span class="string">&quot;(&quot;</span>));</span><br><span class="line">                            &#125;</span><br><span class="line">                            tableCells.get(<span class="number">1</span>).setText(type);</span><br><span class="line">                            tableCells.get(<span class="number">2</span>).setText(length);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        biao = <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(biao != <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">//是否为null</span></span><br><span class="line">                <span class="keyword">if</span> (split[i].contains(<span class="string">&quot;not null&quot;</span>)) &#123;</span><br><span class="line">                    tableCells.get(<span class="number">3</span>).setText(<span class="string">&quot;是&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    tableCells.get(<span class="number">3</span>).setText(<span class="string">&quot;否&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title">getCommentInfo</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        String[] split = sql.split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; split.length; i++) &#123;</span><br><span class="line">            String row = split[i];</span><br><span class="line">            <span class="keyword">if</span> (row.contains(<span class="string">&quot; column &quot;</span>)) &#123;</span><br><span class="line">                map.put(row.substring(row.indexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>, row.indexOf(<span class="string">&quot; is&quot;</span>)), row.substring(row.indexOf(<span class="string">&quot;&#x27;&quot;</span>) + <span class="number">1</span>, row.lastIndexOf(<span class="string">&quot;&#x27;&quot;</span>)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertHeader</span><span class="params">(XWPFTable table)</span> </span>&#123;</span><br><span class="line">        List&lt;XWPFTableCell&gt; tableCells = table.getRow(<span class="number">0</span>).getTableCells();</span><br><span class="line">        tableCells.get(<span class="number">0</span>).setText(<span class="string">&quot;字段名称&quot;</span>);</span><br><span class="line">        tableCells.get(<span class="number">1</span>).setText(<span class="string">&quot;类型&quot;</span>);</span><br><span class="line">        tableCells.get(<span class="number">2</span>).setText(<span class="string">&quot;长度&quot;</span>);</span><br><span class="line">        tableCells.get(<span class="number">3</span>).setText(<span class="string">&quot;是否必填&quot;</span>);</span><br><span class="line">        tableCells.get(<span class="number">4</span>).setText(<span class="string">&quot;备注&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">createDoc</span><span class="params">(String docDir, String sqlDir)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//创建新的word</span></span><br><span class="line">        XWPFDocument doc = <span class="keyword">new</span> XWPFDocument();</span><br><span class="line">        <span class="comment">//从1.sql中拿</span></span><br><span class="line">        String sql = getSql(sqlDir);</span><br><span class="line">        <span class="comment">//截成表</span></span><br><span class="line">        String[] creates = sql.split(<span class="string">&quot;CREATE&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; creates.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (creates[i].contains(<span class="string">&quot;TABLE&quot;</span>)) &#123;</span><br><span class="line">                insertItem(doc, creates[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//导出到本地,E:\demo.docx</span></span><br><span class="line">            FileOutputStream out = <span class="keyword">new</span> FileOutputStream(docDir);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                doc.write(out);</span><br><span class="line">                out.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getSql</span><span class="params">(String dir)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(dir);</span><br><span class="line">        String result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(file), <span class="string">&quot;UTF8&quot;</span>);</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);<span class="comment">//构造一个BufferedReader类来读取文件</span></span><br><span class="line">        String s = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> ((s = br.readLine()) != <span class="keyword">null</span>) &#123;<span class="comment">//使用readLine方法，一次读一行</span></span><br><span class="line">            result = result + <span class="string">&quot;\n&quot;</span> + s;</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertItem</span><span class="params">(XWPFDocument doc, String sql)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建段落</span></span><br><span class="line">        XWPFParagraph p1 = doc.createParagraph();</span><br><span class="line">        <span class="comment">//写入段落内容</span></span><br><span class="line">        XWPFRun run = p1.createRun();</span><br><span class="line">        run.setText(getTableName(sql));</span><br><span class="line">        <span class="comment">//插入字段</span></span><br><span class="line">        insertCells(doc, sql);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setW</span><span class="params">(XWPFTable table, <span class="keyword">int</span> colNum)</span> </span>&#123;</span><br><span class="line">        CTTbl ttbl = table.getCTTbl();</span><br><span class="line">        CTTblGrid tblGrid = ttbl.getTblGrid() != <span class="keyword">null</span> ? ttbl.getTblGrid()</span><br><span class="line">                : ttbl.addNewTblGrid();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; colNum; i++) &#123;</span><br><span class="line">            CTTblGridCol gridCol = tblGrid.addNewGridCol();</span><br><span class="line">            gridCol.setW(<span class="keyword">new</span> BigInteger(<span class="string">&quot;&quot;</span> + <span class="number">1700</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        table.setCellMargins(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql/word </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>knife4j 增强swagger（gradle）</title>
      <link href="2021/03/15/knife4j%20%E5%A2%9E%E5%BC%BAswagger%EF%BC%88Gradle%EF%BC%89/"/>
      <url>2021/03/15/knife4j%20%E5%A2%9E%E5%BC%BAswagger%EF%BC%88Gradle%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="build-gradle文件添加依赖"><a href="#build-gradle文件添加依赖" class="headerlink" title="build.gradle文件添加依赖"></a>build.gradle文件添加依赖</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation group: &#x27;com.github.xiaoymin&#x27;, name: &#x27;knife4j-spring-boot-starter&#x27;, version: &#x27;2.0.4&#x27;</span><br></pre></td></tr></table></figure><p>WebMvcApiConfig 文件   添加红色的两行代码</p><p>@Override</p><pre><code>public void addResourceHandlers(ResourceHandlerRegistry registry) &#123;    registry.addResourceHandler(&quot;/**&quot;).addResourceLocations(&quot;classpath:/static/&quot;);    registry.addResourceHandler(&quot;swagger-ui.html&quot;)            .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);    registry.addResourceHandler(&quot;/webjars/**&quot;)            .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);    registry.addResourceHandler(&quot;doc.html&quot;).addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);    registry.addResourceHandler(&quot;/webjars/**&quot;).addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);    //super.addResourceHandlers(registry);&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> swagger-ui </category>
          
      </categories>
      
      
        <tags>
            
            <tag> knife4j/swagger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>haproxy 域名映射端口（可以负载均衡）</title>
      <link href="2021/03/15/haproxy%20%E5%9F%9F%E5%90%8D%E6%98%A0%E5%B0%84%E7%AB%AF%E5%8F%A3%EF%BC%88%E5%8F%AF%E4%BB%A5%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%89/"/>
      <url>2021/03/15/haproxy%20%E5%9F%9F%E5%90%8D%E6%98%A0%E5%B0%84%E7%AB%AF%E5%8F%A3%EF%BC%88%E5%8F%AF%E4%BB%A5%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y haproxy  //使用RPM安装</span><br><span class="line">rpm -qi haproxy //查看版本</span><br><span class="line">rpm -ql haproxy //查询文件路径</span><br></pre></td></tr></table></figure><p>修改配置文件</p><p>haproxy.cfg            //是配置文件</p><p>HAProxy的配置处理3类来主要参数来源：</p><p>——最优先处理的命令行参数;</p><p>——“global”配置段，用于设定全局配置参数；</p><p>——proxy相关配置段，如“defaults”、“listen”、“frontend”和“backend”；</p><p>“defaults”段用于为所有其它配置段提供默认参数，这配置默认配置参数可由下一个“defaults”所重新设定。</p><p>“frontend”段用于定义一系列监听的套接字，这些套接字可接受客户端请求并与之建立连接。</p><p>“backend”段用于定义一系列“后端”服务器，代理将会将对应客户端的请求转发至这些服务器。</p><p>“listen”段通过关联“frontend”和“backend”定义了一个完整的代理，通常只对TCP流量有用。</p><p>（所有代理的名称只能使用大写字母、小写字母、数字、-(中线)、_(下划线)、.(点号)和:(冒号)。此外，ACL名称会区分字母大小写。）</p><h3 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">frontend  main *:80 //端口号</span><br><span class="line">    acl is_besst_test_api hdr_reg(host) -i ^(test.api.besst.bafang-service.com)  //域名  -i指定匹配域名,如果匹配则分发给后端 </span><br><span class="line"></span><br><span class="line">acl domain_kermit1 hdr_beg(host) -i kermit1.com  #同上（可以指定多个）</span><br><span class="line">   acl domain_kermit2 hdr_beg(host) -i kermit2.com</span><br><span class="line"></span><br><span class="line">    use_backend besst_test_api if is_besst_test_api//设置每个后端使用哪个服务器集群</span><br><span class="line">use_backend kermit1 if domain_kermit1      #同上（可以指定多个）</span><br><span class="line">        use_backend kermit2 if domain_kermit2</span><br><span class="line">backend besst_test_api</span><br><span class="line">    balance     roundrobin//后端负载均衡策略</span><br><span class="line">    server app1 127.0.0.1:7109 check maxconn 30  //80转7109#后端服务器列表</span><br><span class="line"></span><br><span class="line">backend kermit1（对应上面的usr_backend）</span><br><span class="line">        mode http//使用http协议</span><br><span class="line">        balance roundrobin</span><br><span class="line">        server web01 192.168.90.123:82 check inter 2000 fall 3</span><br><span class="line">backend kermit2</span><br><span class="line">        mode http</span><br><span class="line">        balance roundrobin</span><br><span class="line">        server web01 192.168.90.123:83 check inter 2000 fall 3</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="页面展示-，配置文件中添加"><a href="#页面展示-，配置文件中添加" class="headerlink" title="页面展示 ，配置文件中添加"></a>页面展示 ，配置文件中添加</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">listen stats</span><br><span class="line">mode http</span><br><span class="line">bind 0.0.0.0:8111</span><br><span class="line">stats enable</span><br><span class="line">stats uri     /haproxy-status  （后缀路径）</span><br><span class="line">stats auth    admin:admin（用户名：密码）</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="查询配置文件是否出错"><a href="#查询配置文件是否出错" class="headerlink" title="查询配置文件是否出错"></a>查询配置文件是否出错</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">haproxy -c -f /etc/haproxy/haproxy.cfg</span><br></pre></td></tr></table></figure><h3 id="启动：systemctl-start-haproxy"><a href="#启动：systemctl-start-haproxy" class="headerlink" title="启动：systemctl start haproxy"></a>启动：systemctl start haproxy</h3><p>haproxy -f /etc/haproxy/haproxy.cfg</p><h3 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h3><p>systemctl enable haproxy.service</p><h3 id="查看运行状态"><a href="#查看运行状态" class="headerlink" title="查看运行状态"></a>查看运行状态</h3><p>systemctl status haproxy.service       systemctl status haproxy</p><h3 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h3><p>service haproxy restart             systemctl restart haproxy</p><h3 id="页面访问例子："><a href="#页面访问例子：" class="headerlink" title="页面访问例子："></a>页面访问例子：</h3><p><a href="http://59.110.218.102:8111/haproxy-status">http://59.110.218.102:8111/haproxy-status</a></p><h3 id="报错解决"><a href="#报错解决" class="headerlink" title="报错解决"></a>报错解决</h3><p><img src="https://tcs-devops.aliyuncs.com/storage/112218ac14340b7efddee4166beb98d1c64a?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NTc4MCwiaWF0IjoxNjE2MTQwOTgwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjIxOGFjMTQzNDBiN2VmZGRlZTQxNjZiZWI5OGQxYzY0YSJ9.A6zOmjTMPSoRuJDzEBiMQT0EQNVYtwWNVdXiWfySPn4&download=image.png"></p><p>先修改selinux(如果状态变了就不用修改sysctl.conf了)</p><h3 id="修改sysctl-conf"><a href="#修改sysctl-conf" class="headerlink" title="修改sysctl.conf"></a>修改sysctl.conf</h3><p>vi /etc/sysctl.conf</p><p>net.ipv4.ip_nonlocal_bind=1</p><p>sysctl -p</p><p>查看SELinux状态：</p><p>1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态</p><p>SELinux status:                 enabled</p><p>2、getenforce                 ##也可以用这个命令检查</p><p>关闭SELinux：</p><p>1、临时关闭（不用重启机器）：</p><p>setenforce 0                  ##设置SELinux 成为permissive模式</p><pre><code>                          ##setenforce 1 设置SELinux 成为enforcing模式</code></pre><p>2、修改配置文件需要重启机器：</p><p>修改 vi/etc/selinux/config 文件</p><p>将SELINUX=enforcing改为SELINUX=disabled</p><p>重启机器即可</p><h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove haproxy</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/1122a7f076abfc536b6259bda98b2dea740f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NTc4MCwiaWF0IjoxNjE2MTQwOTgwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjJhN2YwNzZhYmZjNTM2YjYyNTliZGE5OGIyZGVhNzQwZiJ9.wBuw6xB0x420-aa0M9EP7y8mMbnc_VhEX8iMP_76Gwc&download=image.png"></p><p>输入命令查找：find / -name “haproxy”</p><p>查看相关文件是否已经卸载干净。</p><p><img src="https://tcs-devops.aliyuncs.com/storage/1122f744bf263702dd155efd650d0a9e4162?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NTc4MCwiaWF0IjoxNjE2MTQwOTgwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjJmNzQ0YmYyNjM3MDJkZDE1NWVmZDY1MGQwYTllNDE2MiJ9.gry2yBs2vATVSEB6mzHdeezYKGXy78cjnYeMNMgCZ_A&download=image.png"></p><p>如果还有残余可以使用命令：</p><p>rm -rf “第二步查询到的文件”</p><p><img src="https://tcs-devops.aliyuncs.com/storage/11225d437d78ea2a0fd7c6c93e6578aa621d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NTc4MCwiaWF0IjoxNjE2MTQwOTgwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjI1ZDQzN2Q3OGVhMmEwZmQ3YzZjOTNlNjU3OGFhNjIxZCJ9.HbtLKZOMkafHrJ000a9JnvpeILddmmq9eicRy4bBxFU&download=image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Haproxy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> haproxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jar包转exe</title>
      <link href="2021/03/15/jar%E5%8C%85%E8%BD%ACexe/"/>
      <url>2021/03/15/jar%E5%8C%85%E8%BD%ACexe/</url>
      
        <content type="html"><![CDATA[<h3 id="主界面"><a href="#主界面" class="headerlink" title="主界面"></a>主界面</h3><p><img src="https://tcs-devops.aliyuncs.com/storage/1123b0dc11b721f8a0174daead87cb976126?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNiMGRjMTFiNzIxZjhhMDE3NGRhZWFkODdjYjk3NjEyNiJ9.pWQIIxeR5KAZqFFMdrPZCHaF7XofQ500019biPCPf3A&download=image.png"></p><h3 id="激活码"><a href="#激活码" class="headerlink" title="激活码"></a>激活码</h3><p>L-g782dn2d-1f1yqxx1rv1sqd</p><p>name  和 company  随意输入</p><p><img src="https://tcs-devops.aliyuncs.com/storage/112301504bffafa3fa1994ca26b5dd782b2c?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjMwMTUwNGJmZmFmYTNmYTE5OTRjYTI2YjVkZDc4MmIyYyJ9.MlNF2y8qLwH-j6LDS-fzzI99Cubf_zO7Jrt4GTo20p0&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/11236c5707bdc9e4228e4101cd44a0d2c046?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM2YzU3MDdiZGM5ZTQyMjhlNDEwMWNkNDRhMGQyYzA0NiJ9.cp7WJJ5oY-fQHtssZIOZAAspIVqqTCkMbIigOFX-iuw&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/11237907940a0ea7ff5bc74bfd4464886988?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM3OTA3OTQwYTBlYTdmZjViYzc0YmZkNDQ2NDg4Njk4OCJ9.ieS6YQcbWFsHxR02ELZQ-oHTJo8TGT9iK9wM-pRFkVg&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/11230581b7758e158bc98d036e384a32ba1b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjMwNTgxYjc3NThlMTU4YmM5OGQwMzZlMzg0YTMyYmExYiJ9.fRK6ulBwsuApDaX-FBMvAcwDZ3RepLVXLAWbaw6lQl8&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/1123dc6b0e1edb34f1f6e5e8ac0bae48b535?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNkYzZiMGUxZWRiMzRmMWY2ZTVlOGFjMGJhZTQ4YjUzNSJ9.EablFpHBLyh09EW9U5chlIGKO8aheJRNS7MckbOqnK4&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/1123aa32cb9c8a0b49f4a7fc22a74e28c26f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNhYTMyY2I5YzhhMGI0OWY0YTdmYzIyYTc0ZTI4YzI2ZiJ9.67lGQKnQN3hfUDMKAI-4jwagHHwbzhTaPl65g3t3miE&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/112369e6011c89f126be3bab6de913375593?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM2OWU2MDExYzg5ZjEyNmJlM2JhYjZkZTkxMzM3NTU5MyJ9.FSKnFRHrqSWXbVhCum596UoaAwO61IoERdoCoRGCYRM&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/11237b65482e743bf358c852a8fe1abab427?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM3YjY1NDgyZTc0M2JmMzU4Yzg1MmE4ZmUxYWJhYjQyNyJ9.piRbt04S1450bN_7AHubW-iWwbhzT1Iy61Cz7XxWkZo&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/112323153306269bf7a8e35b52dc9e36259a?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjcyNTYyMSwiaWF0IjoxNjE2MTIwODIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjMyMzE1MzMwNjI2OWJmN2E4ZTM1YjUyZGM5ZTM2MjU5YSJ9.2UgeoVd7tB832WOhu2wOT_r3IvMQ9H74A7wXdBZawCY&download=image.png"></p><p>下面一路默认就行了</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jar/exe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql时间格式化相关</title>
      <link href="2021/03/15/sql%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%9B%B8%E5%85%B3/"/>
      <url>2021/03/15/sql%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">year(SYSDATE())：获取date字段的年，</span><br><span class="line">如2020    SELECT year(SYSDATE())</span><br><span class="line">quarter(SYSDATE())：获取date字段的所属季度，</span><br><span class="line">如3    SELECT quarter(SYSDATE())</span><br><span class="line">date_format(SYSDATE(),&quot;%y-%m&quot;)：将date字段的时间格式化成xx-xx格式，</span><br><span class="line">如2020-01   SELECT date_format(SYSDATE(),&quot;%y-%m&quot;)</span><br><span class="line">date_format(SYSDATE(),&quot;%w&quot;)=&#x27;0&#x27;：date字段的时间属于星期几，</span><br><span class="line">如0表示Monday   SELECT date_format(SYSDATE(),&quot;%w&quot;)=&#x27;0&#x27;</span><br><span class="line">concat(year(SYSDATE()),&#x27;-&#x27;,quarter(SYSDATE()))：</span><br><span class="line">concat是一个拼接函数，将date字段拼接为指定格式，</span><br><span class="line">如2020-1    SELECT concat(year(SYSDATE()),&#x27;-&#x27;,quarter(SYSDATE()))</span><br><span class="line">CAST(SUBSTRING_INDEX(TIME,&quot;:&quot;,1) AS DECIMAL(4,2))：</span><br><span class="line">cast类型转换函数，substring_index中第一个参数为要分割的字段值，第二个参数为分割条件，第三个为取哪部分</span><br><span class="line">substring_index</span><br><span class="line">SELECT SUBSTRING_INDEX(SYSDATE(),&quot;:&quot;,2)</span><br><span class="line">语法：CAST (expression AS data_type)</span><br><span class="line">expression：任何有效的SQServer表达式。</span><br><span class="line">AS：用于分隔两个参数，在AS之前的是要处理的数据，在AS之后是要转换的数据类型。</span><br><span class="line">data_type：目标系统所提供的数据类型，包括bigint和sql_variant，不能使用用户定义的数据类型。</span><br><span class="line">可以转换的类型是有限制的。这个类型可以是以下值其中的一个：</span><br><span class="line">二进制，同带binary前缀的效果 : BINARY    </span><br><span class="line">字符型，可带参数 : CHAR()     </span><br><span class="line">日期 : DATE     </span><br><span class="line">时间: TIME     </span><br><span class="line">日期时间型 : DATETIME     </span><br><span class="line">浮点数 : DECIMAL      </span><br><span class="line">整数 : SIGNED     </span><br><span class="line">无符号整数 : UNSIGNED </span><br><span class="line">例子：</span><br><span class="line">SELECT CAST(&#x27;9.0&#x27; AS decimal)  结果：9</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库列转行</title>
      <link href="2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%97%E8%BD%AC%E8%A1%8C/"/>
      <url>2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%97%E8%BD%AC%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<p>创建表</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tb_score1(</span><br><span class="line">    id INT(11) NOT NULL auto_increment,</span><br><span class="line">    userid VARCHAR(20) NOT NULL COMMENT &#x27;用户id&#x27;,</span><br><span class="line">    cn_score DOUBLE COMMENT &#x27;语文成绩&#x27;,</span><br><span class="line">    math_score DOUBLE COMMENT &#x27;数学成绩&#x27;,</span><br><span class="line">    en_score DOUBLE COMMENT &#x27;英语成绩&#x27;,</span><br><span class="line">    po_score DOUBLE COMMENT &#x27;政治成绩&#x27;,</span><br><span class="line">    PRIMARY KEY(id)</span><br><span class="line">)ENGINE = INNODB DEFAULT CHARSET = utf8;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>插入数据</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO tb_score1(userid,cn_score,math_score,en_score,po_score) VALUES (&#x27;001&#x27;,90,92,80,0);</span><br><span class="line">INSERT INTO tb_score1(userid,cn_score,math_score,en_score,po_score) VALUES (&#x27;002&#x27;,88,90,75.5,0);</span><br><span class="line">INSERT INTO tb_score1(userid,cn_score,math_score,en_score,po_score) VALUES (&#x27;003&#x27;,70,85,90,82);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/1123b3a0ade850e060a61672a8d5f3ce4d32?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjMyMSwiaWF0IjoxNjE2MTQxNTIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNiM2EwYWRlODUwZTA2MGE2MTY3MmE4ZDVmM2NlNGQzMiJ9.DoDksGe75ejuOmJIGm-_T5Mo1OICegPcDACyvMxhrrA&download=image.png"></p><p>转换后：</p><p><img src="https://tcs-devops.aliyuncs.com/storage/1123efb507481be42059aa426c51d986ffd0?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjMyMSwiaWF0IjoxNjE2MTQxNTIxLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNlZmI1MDc0ODFiZTQyMDU5YWE0MjZjNTFkOTg2ZmZkMCJ9.pbjy6bkiSVDsJOc5Z3AIpDXxz-OE2h8N-EWL3IhPSwk&download=image.png"></p><p>本质是将userid的每个科目分数分散成一条记录显示出来。</p><p>直接上SQL：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT userid,&#x27;语文&#x27; AS course,cn_score AS score FROM tb_score1</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT userid,&#x27;数学&#x27; AS course,math_score AS score FROM tb_score1</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT userid,&#x27;英语&#x27; AS course,en_score AS score FROM tb_score1</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT userid,&#x27;政治&#x27; AS course,po_score AS score FROM tb_score1</span><br><span class="line">ORDER BY userid</span><br></pre></td></tr></table></figure><p>这里将每个userid对应的多个科目的成绩查出来，通过UNION ALL将结果集加起来，达到上图的效果。</p><p>附：UNION与UNION ALL的区别（摘）：</p><p>1.对重复结果的处理：UNION会去掉重复记录，UNION ALL不会；</p><p>2.对排序的处理：UNION会排序，UNION ALL只是简单地将两个结果集合并；</p><p>3.效率方面的区别：因为UNION 会做去重和排序处理，因此效率比UNION ALL慢很多；</p>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库批量替换</title>
      <link href="2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2/"/>
      <url>2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update license_plate set number_plate = REPLACE(number_plate,&#x27;-&#x27;,&#x27;&#x27;);</span><br><span class="line"></span><br><span class="line">license_plate （表名）</span><br><span class="line">number_plate  (字段名)</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line">update production_order set source_id=replace(source_id,&#x27;S0&#x27;,&#x27;SO&#x27;) WHERE source_id LIKE &quot;%S0%&quot; and weight = 0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库查询逗号隔开的数据以及匹配数据</title>
      <link href="2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E9%80%97%E5%8F%B7%E9%9A%94%E5%BC%80%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BB%A5%E5%8F%8A%E5%8C%B9%E9%85%8D%E6%95%B0%E6%8D%AE/"/>
      <url>2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E9%80%97%E5%8F%B7%E9%9A%94%E5%BC%80%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BB%A5%E5%8F%8A%E5%8C%B9%E9%85%8D%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>（查询某个数据是否在该字段中）</p><p>SELECT * from title WHERE FIND_IN_SET((SELECT id from label WHERE name = “G330”),label_list)</p><p>紫色是方法，红色是查询出来的id（也可以直接是字符串），蓝色是字段</p><p>（逗号分隔的字段中的数据，匹配另一张表中的数据）</p><p>select t.id,t.title, GROUP_CONCAT(l.name) as label from title t</p><p>inner join label l </p><p>on FIND_IN_SET(l.id,t.label_list)</p><p>group by t.id;</p><p>红色表示要展示的那个字段的数据 , 蓝色表示查询某个数据在该字段中</p><p>（通过分组去重）</p><p>SELECT * FROM title GROUP BY label_list</p><p>红色表示要去重的字段</p>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库行转列</title>
      <link href="2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%8C%E8%BD%AC%E5%88%97/"/>
      <url>2021/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%8C%E8%BD%AC%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h2 id="1-行转列"><a href="#1-行转列" class="headerlink" title="1.行转列"></a>1.行转列</h2><h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS tb_score;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tb_score(</span><br><span class="line">    id INT(<span class="number">11</span>) NOT NULL auto_increment,</span><br><span class="line">    userid VARCHAR(<span class="number">20</span>) NOT NULL COMMENT <span class="string">&#x27;用户id&#x27;</span>,</span><br><span class="line">    subject VARCHAR(<span class="number">20</span>) COMMENT <span class="string">&#x27;科目&#x27;</span>,</span><br><span class="line">    score DOUBLE COMMENT <span class="string">&#x27;成绩&#x27;</span>,</span><br><span class="line">    PRIMARY KEY(id)</span><br><span class="line">)ENGINE = INNODB DEFAULT CHARSET = utf8;</span><br><span class="line"></span><br><span class="line">插入数据</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;语文&#x27;</span>,<span class="number">90</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="number">92</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;英语&#x27;</span>,<span class="number">80</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;语文&#x27;</span>,<span class="number">88</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="number">90</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;英语&#x27;</span>,<span class="number">75.5</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;语文&#x27;</span>,<span class="number">70</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="number">85</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;英语&#x27;</span>,<span class="number">90</span>);</span><br><span class="line">INSERT INTO tb_score(userid,subject,score) VALUES (<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;政治&#x27;</span>,<span class="number">82</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/11230462e5f064f4b64e35786299c05a55ec?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjMwNDYyZTVmMDY0ZjRiNjRlMzU3ODYyOTljMDVhNTVlYyJ9.pn8n6GdSZ4uhP5pLOPwi0T1CJEMiMQiDn8fE_CUOdoc&download=image.png"></p><p>先来看一下转换后的结果：</p><p><img src="https://tcs-devops.aliyuncs.com/storage/11234805c09b4549850b029de59548ec6372?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM0ODA1YzA5YjQ1NDk4NTBiMDI5ZGU1OTU0OGVjNjM3MiJ9.YO3UcDTSvkvLmpMSPRL16UeviKAnezZ6fixhuqBSgtM&download=image.png"></p><p>第一种（if）</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT userid,</span><br><span class="line">SUM(IF(`subject`=&#x27;语文&#x27;,score,0)) as &#x27;语文&#x27;,</span><br><span class="line">SUM(IF(`subject`=&#x27;数学&#x27;,score,0)) as &#x27;数学&#x27;,</span><br><span class="line">SUM(IF(`subject`=&#x27;英语&#x27;,score,0)) as &#x27;英语&#x27;,</span><br><span class="line">SUM(IF(`subject`=&#x27;政治&#x27;,score,0)) as &#x27;政治&#x27; </span><br><span class="line">FROM tb_score </span><br><span class="line">GROUP BY userid</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意点：</p><p>（1）SUM() 是为了能够使用GROUP BY根据userid进行分组，因为每一个userid对应的subject=”语文”的记录只有一条，所以SUM() 的值就等于对应那一条记录的score的值。</p><p>假如userid =’001’ and subject=’语文’ 的记录有两条，则此时SUM() 的值将会是这两条记录的和，同理，使用Max()的值将会是这两条记录里面值最大的一个。但是正常情况下，一个user对应一个subject只有一个分数，因此可以使用SUM()、MAX()、MIN()、AVG()等聚合函数都可以达到行转列的效果。</p><p>（2）IF(<code>subject</code>=’语文’,score,0) 作为条件，即对所有subject=’语文’的记录的score字段进行SUM()、MAX()、MIN()、AVG()操作，如果score没有值则默认为0。</p><p>第二种（case when then else end）</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT userid,</span><br><span class="line">SUM(CASE `subject` WHEN &#x27;语文&#x27; THEN score ELSE 0 END) as &#x27;语文&#x27;,</span><br><span class="line">SUM(CASE `subject` WHEN &#x27;数学&#x27; THEN score ELSE 0 END) as &#x27;数学&#x27;,</span><br><span class="line">SUM(CASE `subject` WHEN &#x27;英语&#x27; THEN score ELSE 0 END) as &#x27;英语&#x27;,</span><br><span class="line">SUM(CASE `subject` WHEN &#x27;政治&#x27; THEN score ELSE 0 END) as &#x27;政治&#x27; </span><br><span class="line">FROM tb_score </span><br><span class="line">GROUP BY userid</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/11230f39dbc95dc4757c5fbdc48d89edbe45?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjMwZjM5ZGJjOTVkYzQ3NTdjNWZiZGM0OGQ4OWVkYmU0NSJ9.-Qrj4eZKJctRfyJ-QUiY80qBLBViMXeNcTmo9QMNKHI&download=image.png"></p><p><strong>3、利用SUM(IF()) 生成列 + WITH ROLLUP 生成汇总行,并利用 IFNULL将汇总行标题显示为Total</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SELECT IFNULL(userid,&#39;total&#39;) AS userid,</span><br><span class="line">SUM(IF(&#96;subject&#96;&#x3D;&#39;语文&#39;,score,0)) AS 语文,</span><br><span class="line">SUM(IF(&#96;subject&#96;&#x3D;&#39;数学&#39;,score,0)) AS 数学,</span><br><span class="line">SUM(IF(&#96;subject&#96;&#x3D;&#39;英语&#39;,score,0)) AS 英语,</span><br><span class="line">SUM(IF(&#96;subject&#96;&#x3D;&#39;政治&#39;,score,0)) AS 政治,</span><br><span class="line">SUM(IF(&#96;subject&#96;&#x3D;&#39;total&#39;,score,0)) AS total</span><br><span class="line">FROM(</span><br><span class="line">    SELECT userid,IFNULL(&#96;subject&#96;,&#39;total&#39;) AS &#96;subject&#96;,SUM(score) AS score</span><br><span class="line">    FROM tb_score</span><br><span class="line">    GROUP BY userid,&#96;subject&#96;</span><br><span class="line">    WITH ROLLUP</span><br><span class="line">    HAVING userid IS NOT NULL</span><br><span class="line">)AS A </span><br><span class="line">GROUP BY userid</span><br><span class="line">WITH ROLLUP;</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/1123635edd46ca57a0b1899fc51eca52e88d?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM2MzVlZGQ0NmNhNTdhMGIxODk5ZmM1MWVjYTUyZTg4ZCJ9.HN3pWVyRy509IuLDFPQFGGH1saTEpRjrBO-81OOjmB4&download=image.png"></p><p><strong>4、利用SUM(IF()) 生成列 + UNION 生成汇总行,并利用 IFNULL将汇总行标题显示为 Total</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT userid,</span><br><span class="line">SUM(IF(`subject`=&#x27;语文&#x27;,score,0)) AS 语文,</span><br><span class="line">SUM(IF(`subject`=&#x27;数学&#x27;,score,0)) AS 数学,</span><br><span class="line">SUM(IF(`subject`=&#x27;英语&#x27;,score,0)) AS 英语,</span><br><span class="line">SUM(IF(`subject`=&#x27;政治&#x27;,score,0)) AS 政治,</span><br><span class="line">SUM(score) AS TOTAL </span><br><span class="line">FROM tb_score</span><br><span class="line">GROUP BY userid</span><br><span class="line">UNION</span><br><span class="line">SELECT &#x27;TOTAL&#x27;,SUM(IF(`subject`=&#x27;语文&#x27;,score,0)) AS 语文,</span><br><span class="line">SUM(IF(`subject`=&#x27;数学&#x27;,score,0)) AS 数学,</span><br><span class="line">SUM(IF(`subject`=&#x27;英语&#x27;,score,0)) AS 英语,</span><br><span class="line">SUM(IF(`subject`=&#x27;政治&#x27;,score,0)) AS 政治,</span><br><span class="line">SUM(score) FROM tb_score</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/1123df96762cd196e0ce18ebfa98e519811f?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNkZjk2NzYyY2QxOTZlMGNlMThlYmZhOThlNTE5ODExZiJ9.yfETEede6nS6WiEMHEtvtD1QSS9nCD8eO0Ua1NQ9i8A&download=image.png"></p><p>5，<strong>利用SUM(IF()) 生成列，直接生成结果不再利用子查询</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT IFNULL(userid,&#x27;TOTAL&#x27;) AS userid,</span><br><span class="line">SUM(IF(`subject`=&#x27;语文&#x27;,score,0)) AS 语文,</span><br><span class="line">SUM(IF(`subject`=&#x27;数学&#x27;,score,0)) AS 数学,</span><br><span class="line">SUM(IF(`subject`=&#x27;英语&#x27;,score,0)) AS 英语,</span><br><span class="line">SUM(IF(`subject`=&#x27;政治&#x27;,score,0)) AS 政治,</span><br><span class="line">SUM(score) AS TOTAL </span><br><span class="line">FROM tb_score</span><br><span class="line">GROUP BY userid WITH ROLLUP;</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/11231b746fa7344e3efd8d0dd4eeb90ab129?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjMxYjc0NmZhNzM0NGUzZWZkOGQwZGQ0ZWViOTBhYjEyOSJ9.i6NNDUOGiCOys8BK086gaT4yrnjmcWebBphG-ohpKlw&download=image.png"></p><p><strong>6、动态，适用于列不确定情况</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SET @EE=&#x27;&#x27;;</span><br><span class="line">select @EE :=CONCAT(@EE,&#x27;sum(if(subject= \&#x27;&#x27;,subject,&#x27;\&#x27;,score,0)) as &#x27;,subject, &#x27;,&#x27;) AS aa FROM (SELECT DISTINCT subject FROM tb_score) A ;</span><br><span class="line"></span><br><span class="line">SET @QQ = CONCAT(&#x27;select ifnull(userid,\&#x27;TOTAL\&#x27;)as userid,&#x27;,@EE,&#x27; sum(score) as TOTAL from tb_score group by userid WITH ROLLUP&#x27;);</span><br><span class="line">-- SELECT @QQ;</span><br><span class="line"></span><br><span class="line">PREPARE stmt FROM @QQ;</span><br><span class="line">EXECUTE stmt;</span><br><span class="line">DEALLOCATE PREPARE stmt;</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/1123e6391022674d24052bbda2157274176b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjNlNjM5MTAyMjY3NGQyNDA1MmJiZGEyMTU3Mjc0MTc2YiJ9.TXUsBH6ly7Vc0YfY6fl7zgnKNASA9qUIMdP3K6mKydQ&download=image.png"></p><p><img src="https://tcs-devops.aliyuncs.com/storage/112342faca1f35441810990a39a4566f0dfd?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM0MmZhY2ExZjM1NDQxODEwOTkwYTM5YTQ1NjZmMGRmZCJ9.a2w2i8wwxEPM_v3BlidQDhvoWGd0FK6iaR-P_GR2N-o&download=image.png"></p><p><strong>7、合并字段显示：利用group_concat()</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT userid,GROUP_CONCAT(`subject`,&quot;:&quot;,score)AS 成绩 FROM tb_score</span><br><span class="line">GROUP BY userid</span><br></pre></td></tr></table></figure><p><img src="https://tcs-devops.aliyuncs.com/storage/1123597734c2dd241e2b8d576991e19d7b5b?Signature=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBcHBJRCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9hcHBJZCI6IjVlNzQ4MmQ2MjE1MjJiZDVjN2Y5YjMzNSIsIl9vcmdhbml6YXRpb25JZCI6IiIsImV4cCI6MTYxNjc0NjM3MCwiaWF0IjoxNjE2MTQxNTcwLCJyZXNvdXJjZSI6Ii9zdG9yYWdlLzExMjM1OTc3MzRjMmRkMjQxZTJiOGQ1NzY5OTFlMTlkN2I1YiJ9.dGq4OYqd_ZGoAR-Q8cw6sNwQrr2vu0gHg7-9kniNB7k&download=image.png"></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">group_concat()，手册上说明:该函数返回带有来自一个组的连接的非NULL值的字符串结果。</span><br><span class="line">比较抽象，难以理解。通俗点理解，其实是这样的：group_concat()会计算哪些行属于同一组，</span><br><span class="line">将属于同一组的列显示出来。要返回哪些列，由函数参数(就是字段名)决定。分组必须有个标准，</span><br><span class="line">就是根据group by指定的列进行分组。</span><br><span class="line">结论：group_concat()函数可以很好的建属于同一分组的多个行转化为一个列。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据库相关 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
